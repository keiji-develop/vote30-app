# VOTE30サイト 映像・音源リンク機能 開発・運用ルール

## 🎯 リンクの役割と優先順位

```
1. 購入支援（最重要）- DVD/Blu-ray、サブスクリプション契約促進
2. 視聴体験 - ユーザーが公演の雰囲気を実際に確認
3. 情報補完 - 収録メディアの入手先情報提供
4. 最終目標 - 上記3つを通じた投票判断材料の提供
```

## 📊 データ構造管理規則

### 現在の構造（移行期まで維持）
```json
"links": ["URL1", "URL2"]  // 配列形式（後方互換性）
```

### 目標構造（段階的移行）
```json
"links": [
  {
    "platform": "amazon|sony_music|apple_music|spotify|youtube",
    "label": "表示名",
    "priority": 1-5,
    "urls": {
      "direct": "直接リンク（必須）",
      "affiliate": "アフィリエイトリンク（後から追加）"
    }
  }
]
```

## 🔧 実装・開発規則

### 段階的実装の厳守
1. **Step 1**: 現在コメントアウトされたリンク表示機能を有効化
2. **Step 2**: 後方互換性を保った新データ構造への移行対応
3. **Step 3**: アフィリエイト機能の実装

### UI/UX設計原則
- **配置**: 購入支援リンクを左側に優先配置
- **視覚**: プラットフォーム別の色分け・アイコン使用
- **ラベル**: 「公式購入」「Amazon」「視聴」「試聴」等の明確な表示
- **優先順位**: priority値に基づく表示順序

## 💼 運用・管理規則

### データ拡充方針
- 人気・重要度の高い公演から優先的にリンク追加
- 1プラットフォーム1リンクの原則
- アフィリエイトリンクは手動調査・追加

### アフィリエイト対応規則
```typescript
// 設定による一括制御
AFFILIATE_CONFIG.enabled = false/true

// フォールバック原則
affiliate存在 && 有効 ? affiliate : direct
```

### 後方互換性の保証
- 旧配列形式と新オブジェクト形式の両方に対応
- 段階的移行中は両形式を並行サポート
- データ移行は一括でなく漸進的に実施

## ⚖️ 法的・コンプライアンス
- アフィリエイト広告表示義務の遵守
- LegalAllInOne.tsxへの適切な記載追加
- 各アフィリエイトプログラムの規約遵守

## 🚀 開発作業の優先順位
```
Priority 1: 既存リンク表示機能の有効化
Priority 2: 重要公演への手動リンク追加
Priority 3: 新データ構造の段階的導入
Priority 4: アフィリエイト機能の実装
Priority 5: 分析・改善機能の追加
```

## ❌ 禁止事項
- 既存データ構造の破壊的変更
- 後方互換性を無視した一括移行
- アフィリエイト機能の性急な実装
- リンク表示の複雑化（ユーザビリティ優先）

## 📋 実装チェックリスト

### Phase 1: 基本機能有効化
- [ ] DetailModal.tsxのコメントアウト解除
- [ ] 既存データ（summarize_1）での動作確認
- [ ] UI/UXの基本デザイン確定

### Phase 2: データ拡充
- [ ] 優先公演リストの作成
- [ ] 手動でのリンク調査・追加
- [ ] 新データ構造への移行準備

### Phase 3: アフィリエイト対応
- [ ] アフィリエイトプログラム申請
- [ ] 設定管理システムの実装
- [ ] 法的表示の追加

---

**作成日**: 2025年6月7日  
**最終更新**: 2025年6月7日 